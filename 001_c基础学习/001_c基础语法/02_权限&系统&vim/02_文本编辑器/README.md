# VI 编辑器
## 简介
* vi 编辑器是 Linux 系统中最常用的文本编辑器，vi 在Linux界有编辑器之神的美誉，几乎所有的 Linux 发行版中都包含 vi 程序。
* vi 工作在字符模式下，不需要图形界面，非常适合远程及嵌入式工作，是效率很高的文本编辑器，尽管在 Linux 上也有很多图形界面的编辑器可用，但vi的功能是那些图形编辑器所无法比拟的。
* vim 是 vi 的升级版，它不仅兼容 vi 的所有指令，而且还有一些新的特性，例如 vim 可以撤消无限次、支持关键词自动完成、可以用不同的颜色来高亮你的代码。vim 普遍被推崇为类 vi 编辑器中最好的一个。
* vi有输入和命令两种工作模式。输入模式（也叫插入模式）用于输入字符。命令模式则是用来运行一些编排文件、存档以及离开vi等操作命令。当执行vi后，首先进入命令模式，此时输入的任何字符都被视为命令。

## 基本操作
1. 打开文件
    * vim filename 打开或者新建文件，并将光标放置在第一行行首，入宫文件不存在会新建文件
2. 编辑文件
    * 输入i就可以键入插入模式，输入esc退出到指令列模式
3. 保存文件
    * 命令模式中，输入shift + zz，就可以保存退出当前文件

## wim实用命令
1. 插入模式
    * a, A, (后)
    * i, I, (前)
    * o, O  (行)

2. vim的退出
    * ZZ  保存退出
    * :wq 保存退出
    * :x  保存退出
    * :w filename 保存到指定文件
    * :q  退出，但如果文件修改过，无法退出
    * :q! 强制退出，不保存
    * :!命令 暂时离开vim，执行命令

3. vim的删除和修改
    * [n]x  向后删除n个字符
    * [n]X  向前删除n个字符
    * D     删除光标所在开始到此行尾的字符
    * [n]dd 剪切从当前行开始的n行
    * [n]yy 复制从当前行开始的n行
    * p     把剪切板的内容插入到当前行
    * dG    删除光标所在行开始到文件尾的所有字符

4. 修改
    * J 合并两行，两行中加入一个空格
    * . 执行上一次操作
    * u 撤销前一个命令

5. 定位功能
    * ctrl + f 
        * 前滚动一个屏幕
    * ctrl + b
        * 向后滚动一个屏幕
    * gg
        * 文件第一行行首
    * G
        * 文件最后一行
    * mG 或 mgg
        * 到指定行
    * /内容
        * 查找
        * n 向下查找
        * N 向上查找
6. 查找
    * / 字符串
        * 查找指定
    * n
        * 寻找下一个
    * N
        * 寻找上一个
    * /^字符串
        * 查找一个字符串开头的行
    * /字符串$
        * 查找以字符串结束的行
    * /a.b
        * 查找a任意字符b

## 替换
* ：s(substitute) 命令用来查找和替换字符串
    * `:{作用范围}s/{目标}/{替换}/{替换标志}`

* 作用范围
    1. 当前行   
        * `:s/foo/bar/g`
    2. 全文
        * `:%s/foo/bar/g`
    3. 选区
        * `:'<,'>/foo/bar/g`
    4. 指定行
        * `5,12s/foo/bar/g`
    5. 当前行.与接下来的两行+2
        * `.,+2s/foo/bar/g`

* 作用标记，例如/g
    1. 空标记
        * 表示只会替换从光标位置开始，目标的第一次出现
        * `%s/foo/bar`
    2. i表示大小写不敏感查找，I表示大小写敏感
        * `:%s/foo/bar/i`
        * `:%sfoo\c/bar  表示需要确认`

## 基本替换
1. r
    * 替换当前光标字符
2. :r 文件名
    * 在光标当前位置载入另一个文件
3. :s/p1/p2/g
    * 当前行中的p1全部换为p2
4. :g/p1/s//