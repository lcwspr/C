# 用户权限管理
* 简介
    *	用户权限管理是Unix/Linux系统工作中重要的一环，用户管理包括用户与组账号的管理。
    *	在Unix/Linux系统中，不论是由本机或是远程登录系统，每个系统都必须拥有一个账号，并且对于不同的系统资源拥有不同的使用权限。
    *	Unix/Linux系统中的root账号通常用于系统的维护和管理，它对Unix/Linux操作系统的所有部分具有不受限制的访问权限。
    *	在Unix/Linux安装的过程中，系统会自动创建许多用户账号，而这些默认的用户就称为“标准用户”。
    *	在大多数版本的Unix/Linux中，都不推荐直接使用root账号登录系统。
## 常用指令
### 用户登陆查看
1. whoami
    * 查看当前系统当前账号的用户名，可以通过cat /etc/passwd查看系统用户信息
    * 由于系统管理员通常需要使用多种身份登陆系统，例如通常使用普通用户登陆系统然后使用su命令切换到root身份对系统进行管理，这个时候可以使用whoami来查看当前用户的身份
2. who
    * 查看当前所有登陆系统的用户信息
    * 常用选项
        1. -m 或 am I   
            * 只显示运行who命令的用户名，登陆终端和登陆时间
        2. -q
            * 只显示用户的登陆账号和登陆用户的数量
        3. -u
            * 在登陆时间后显示该用户最后一次操作到当前时间的间隔
3. last
    * 查看用户组的登陆信息
4. w
    * w命令也可以查看登录当前系统的用户信息。与who命令相比，w命令的功能更强大，它不但可以显示当前有哪些用户登录到系统，还可以显示这些用户正在进行的操作，并给出更加详细和科学的统计数据。
    * 命令格式
        * w 选项 用户名
        * 如果携带用户名，则只显示制定用户的信息，否则显示当前所有登陆用户的信息
    * 常用选项
        1. h
            * 只显示运行who命令的用户名，登陆终端和登陆时间
        2. l 
            * 只显示详细列表，预设
        3. s
            * 使用短列表，不显示登陆时间JCPU和PCPU时间
        4. u
            * 忽略执行程序的名称，以及该程序的PCPU时间
5. 退出登陆账户 exit
    * 图形用户退出当前终端
    * 如果使用ssh远程登陆，退出登陆账户

### 用户组增删改
1. 切换用户 su
    * 可以通过su命令切换用户，su后面可以加-，su -命令会在切换到对应的用户时将当前的工作目录自动切换成切换后用户的家目录
    * 常用
        * su -
            * 切换到root并且切换到/root
        * su - lcwspr
            * 切换到lcwspr并切换到/home/lcwspr

2. 添加，删除组账号
    * groupadd
    * groupdel
3. 修改用户所在组
    * usermod
    * 用法
        * usermod -g 用户组 用户名
            * 更改用户所属组，是覆盖，
        * usermod -G 组名1[,组名2..] 用户名
            * 添加用户所属组
    * groups
        * 可以显示用户所有的组
4. 添加用户账号
    * useradd
    * 简述
        * 在unix/Linux中添加用户账号可以使用adduser或useradd命令，是完全一样的
    * 命令格式
        * useradd [参数] 新建用户账号
    * 选项参数
        * -c<备注>
            * 加上备注文字，会保存在/etc/passwd备注
        * -d <dirname> 
            * 指定用户登陆时的起始目录
        * -e <有效期限>
            * 指定账号的有效期限
        * -f <缓冲天数>
            * 指定过期多少天关闭该账号
        * -g
            * 指定用户所属组名称
        * -G
            * 指定用户所属附加群组
        * -m
            * 自动建立用户登陆目录
        * -M 
            * 不要建立用户登入目录
        * -n
            * 取消以用户为名的群组
        * -r
            * 建立系统账号
        * -s
            * 指定用户登陆有使用的shell
        * -u
            * 指定用户ID
    * 相关说明
        * Linux每个用户都要有一个主目录，主目录就是第一次登陆系统，用户的默认当前目录(/home/用户)；
        * 每一个用户必须有一个主目录，所以用useradd创建用户的时候，一定给用户指定一个主目录；
        * 用户的主目录一般要放到根目录的home目录下，用户的主目录和用户名是相同的；
        * 如果创建用户的时候，不指定组名，那么系统会自动创建一个和用户名一样的组名。

5. 设置用户密码 passwd
    * 在unix/linux，超级用户可以使用passwd命令为普通用户设置或修改用户的口令，用户也可以直接使用该命令修改自己的密码，无需加用户名

6. 删除用户 userdel
    * userdel 用户名
        * 删除用户，但不会自动删除用户主目录
    * userdel -r 用户名
        * 删除用户，同时删除用户主目录

7. 查询用户登陆情况 last
    * 不论用户从哪里登陆，管理员都可以通过last命令查出。

## 文件权限
1. 修改文件权限 chmod
    * chmod修改文件权限有两种使用格式(字母法与数字法)
    * 字母法
        * chomd u/g/o/a +-= rwx 文件
    * 数字法
        * rwx分别为4 2 1

2. chown
    * 使用方法 chown 用户名 文件名或目录名

3. 修改文件所属组
    * chgrp

## 系统管理
1. 查看当前日历
    * cal
    * 用于查看当前日历，-y显示整年
2. 显示或设置时间 date
    * 设置时间格式(需要管理员权限)
    * date[MMDDhhmm[[CC]YY][.ss]]+format
    * CC为年的前两位yy为年的后两位，前两位的mm为月，后两位的mm为分钟,dd为天，hh为小时，ss为秒， 如date
    * y,m,d,H,M,S 为格式化串  --- +。。。

3. 查看进程信息 ps
    * 进程是一个具有一定独立功能的程序，是操作系统动态执行的基本单元。ps命令可以查看进程的详细状况。
    * 选项
        1. -a 
            * 显示 终端上的所有进程，包括其他用户的进程
        2. -u
            * 显示进程的详细状态
        3. -x
            * 显示没有控制终端的进程
        4. -w
            * 显示加宽，可以显示更多信息
        5. -r
            * 只显示正在运行的进程

4. 动态显示进程top
    * 简介
        * top命令用来动态显示运行中的进程。top命令能够在运行后，在指定的时间间隔更新显示信息。可以在使用top命令时加上-d <interval>来指定显示信息更新的时间间隔。
        * 常用选项
            1. M，P， T， U
                * 内存量，CPU占有率，进程运行时间， 输入用户名筛选
            2. k, q, h
                * PID , 退出，获得帮助

5. 终止进程 kill
    * kill 命令指定进程号的进程，需要配合ps使用
    * 格式
        * kill [-signal] pid
    * 信号值从0-15，9为绝对终止。

6. 后台程序 &，jobs, fg
    * 用户可以将一个前台程序掉入后台执行，方法为&
    * 如果程序已经执行，可以使用ctrl + z调入后台
    * jobs查看后台运行程序
    * fg 编号，将后台调入前台

7. 检测磁盘
    * df用于检测文件系统的磁盘空间占用和空闲情况，可以显示所有文件系统对节点和磁盘块的使用情况。
    * 常用选项
        * -a
            * 显示所有文件系统
        * -h
            * 以人类可读单位
        * -T
            * 显示文件系统

8. 检测目录所占用磁盘空间 du
    * du命令用于统计目录或文件所占磁盘空间的大小，该命令的执行结果与df类似，du更侧重于磁盘的使用状况。
    * du 选项 目录或者文件名
    * 常用选项
        * -a
            * 递归显示执行目录中各文件和子目录的占用
        * -s
            * 显示指定文件或目录占用数据块
        * -b
            * 以字节为单位
        * -l
            * 计算所有文件大小

## 应用软件安装和卸载
* 在 Linux 操作系统下，几乎所有的软件均通过RPM 进行安装、卸载及管理等操作。RPM 的全称为Redhat Package Manager ，是由Redhat公司提出的，用于管理Linux下软件包的软件。它是一种软件打包发行并且实现自动安装的程序，需要用rpm程序安装的软件包，其后缀是.rpm，并可以对这种程序包进行安装、卸装和维护。
    * rpm 命令的使用格式如下
    * 常用选项
        1. i
            * 指定安装的软件包
        2. -h
            * 使用#显示详细
        3. -v
            * 显示安装详细信息
        4. -q
            * 查询系统是否已安装指定的软件包
        5. -a
            * 查看系统已安装的所有软件包
        6. -e
            * 卸载软件包
        7. -nodeps
            * 配合e参数，强制卸载不检查依赖项目
        8. -force
            * 强制操作，如强制安装删除等等
    * apt指令
        * sudo apt-get update
            * 获取最新的软件包列表
        * sudo apt-get install xxx
            * 安装xxx
        * sudo apt-get remove xxx
            * 删除xxx

## 查看或配置网卡信息 ifconfig
1. 如果只是敲 ifconfig，会显示所有网卡信息
    * 字段信息
        * eth0	网络接口名称
        * Link encap	链路封装协议
        * Hwaddr	网络接口的MAC地址
        * Inet addr	IP地址
        * Bcast	广播地址
        * Mask	子网掩码
        * UP	网络接口状态标识，UP已经启用，DOWN已经停用
        * BROADCAST	广播标识，标识网络接口是否支持广播
        * RUNNING	传输标识，标识网络接口是否已经开始传输分组数据
        * MULTICAST	多播标识，标识网络接口是否支持多播
        * MTU，Metric	MTU:最大传输单位，单位：字节。Metric:度量值，用于RIP建立网络路由用
        * RX bytes	接收数据字节统计
        * TX bytes	发送数据字节统计
    * 临时修改
        * ifconfig 网络接口名称 [地址协议类型] [address] [参数]
            * 地址协议 inet(ipv4), inet6(ipv6)
            * 例如： ifconfig eth0 inet 192.168.1.1 netmase 255.255.255.0 up
        * 常用参数
            * -a 显示所有网络接口状态
            * -inet [ip]  设置ip地址
            * netmask [子网掩码]  设置子网掩码
            * up , down
        * 配置文件
            * rethat 修改
                * /etc/sysconfig/network-scripts/if..
            * debain
                * /etc/networkmanager/system-connections/wire connection

2. ping
    * 通过ICMP协议向远程主机发送ECHO_REQUEST请求,期望收到ECHO_REPLY
    * 通过ping 命令可以检查是否与远程主机建立了tcp/ip连接
    * 参数
        * -c 
            * 发送指定数量的IP数据包
        * -i
            * 每次发送消息时间间隔，默认一秒
        * -s 
            * 分组大小
        * -w
            * 以秒为单位，超时就停止

3. route
    * 可以增加，修改，显示路由信息
        * route 可以增加，修改，显示路由信息
        * route [-v] [-A family] add default [gw 默认网关地址] [[dev-interface]] 

4. netstat
    * netstat 命令监控网络状态，包括接口设置，Ip路由，各种网络协议统计
    * 常用命令
        * -a 列出所有端口
        * -i 显示网络接口列表
        * -at 所以TCP端口
        * -au 所有UDP端口
        * -l 所有监听端口
        * lu 指定网络接口
        * s 显示所以协议统计信息
        * p 显示PID进程